<!DOCTYPE html>
<html lang="zh-TW">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>GOLDENWAY å®˜ç¶²å…§å®¹ç®¡ç†ç³»çµ±</title>

  <!-- å­—é«” -->
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600&display=swap" rel="stylesheet" />

  <style>
    :root {
      --bg: #f5f5f7;
      --accent: #0071e3;
      --accentSoft: rgba(0, 113, 227, 0.1);
      --border: #d0d0d4;
      --textMain: #1d1d1f;
      --textSub: #6e6e73;
      --sidebarW: 270px;
      --headerH: 60px;
    }

    * {
      box-sizing: border-box;
    }

    body {
      margin: 0;
      font-family: Inter, -apple-system, BlinkMacSystemFont, "Segoe UI", Helvetica, Arial, sans-serif;
      background: var(--bg);
      height: 100vh;
      overflow: hidden;
      color: var(--textMain);
    }

    .app {
      display: flex;
      flex-direction: column;
      height: 100vh;
    }

    /* â”€â”€â”€â”€â”€ Top Bar â”€â”€â”€â”€â”€ */
    .topbar {
      height: var(--headerH);
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: 0 18px;
      background: rgba(255, 255, 255, 0.83);
      border-bottom: 1px solid var(--border);
      backdrop-filter: blur(20px);
      -webkit-backdrop-filter: blur(20px);
      position: sticky;
      top: 0;
      z-index: 10;
    }

    .brand {
      display: flex;
      align-items: center;
      gap: 10px;
    }

    .brand-logo {
      width: 30px;
      height: 30px;
      border-radius: 6px;
      background: #000;
      overflow: hidden;
      flex-shrink: 0;
    }

    .brand-logo img {
      width: 100%;
      height: 100%;
      object-fit: contain;
      display: block;
    }

    .brand-title {
      font-size: 13px;
      font-weight: 600;
      letter-spacing: 1px;
    }

    /* â”€â”€â”€â”€â”€ Search â”€â”€â”€â”€â”€ */
    .search-bar {
      position: relative;
      width: 380px;
      max-width: 100%;
    }

    .search-input {
      width: 100%;
      padding: 8px 34px;
      border-radius: 999px;
      border: 1px solid var(--border);
      background: rgba(255, 255, 255, 0.9);
      outline: none;
      font-size: 14px;
    }

    .search-input:focus {
      border-color: var(--accent);
      box-shadow: 0 0 0 3px var(--accentSoft);
      background: #fff;
    }

    .search-icon {
      position: absolute;
      left: 10px;
      top: 50%;
      transform: translateY(-50%);
      color: #999;
      font-size: 14px;
      pointer-events: none;
    }

    .search-clear {
      position: absolute;
      right: 10px;
      top: 50%;
      transform: translateY(-50%);
      cursor: pointer;
      display: none;
      font-size: 16px;
      color: #aaa;
      user-select: none;
    }

    .search-clear.visible {
      display: block;
    }

    /* â”€â”€â”€â”€â”€ Layout â”€â”€â”€â”€â”€ */
    .body {
      display: flex;
      flex: 1;
      min-height: 0;
    }

    .sidebar {
      width: var(--sidebarW);
      border-right: 1px solid var(--border);
      background: #fafafa;
      padding: 10px;
      overflow-y: auto;
      display: flex;
      flex-direction: column;
    }

    .btn {
      font-size: 12px;
      padding: 4px 10px;
      margin-right: 6px;
      border: 1px solid var(--border);
      border-radius: 20px;
      background: white;
      cursor: pointer;
    }

    .btn-primary {
      background: var(--accent);
      border-color: var(--accent);
      color: white;
    }

    .tree-container {
      margin-top: 6px;
      flex: 1;
      overflow-y: auto;
    }

    /* â”€â”€â”€â”€â”€ Tree Style â”€â”€â”€â”€â”€ */
    ul {
      list-style: none;
      padding-left: 14px;
      margin: 0;
    }

    /* æ ¹å±¤ ul ä¸ç¸®èµ·ä¾†ï¼Œåªæœ‰è³‡æ–™å¤¾åº•ä¸‹çš„ ul æœƒæ”¶åˆ */
    #tree > ul {
      padding-left: 0;
    }

    .folder {
      cursor: pointer;
      font-weight: 500;
      margin: 3px 0;
    }

    .folder-title {
      display: inline-flex;
      align-items: center;
      gap: 4px;
      padding: 2px 4px;
      border-radius: 4px;
    }

    .folder-title:hover {
      background: rgba(0, 0, 0, 0.05);
    }

    .arrow {
      font-size: 10px;
      transition: transform 0.18s;
      color: #a1a1a6;
    }

    .folder.open > .folder-title .arrow {
      transform: rotate(90deg);
    }

    /* çœŸæ­£æ§åˆ¶å±•é–‹ / æ”¶åˆçš„é—œéµï¼šé è¨­é—œé–‰ï¼Œopen æ™‚æ‰é¡¯ç¤º */
    .folder > ul {
      display: none;
    }

    .folder.open > ul {
      display: block;
    }

    .file {
      cursor: pointer;
      padding: 2px 4px;
      border-radius: 4px;
      color: var(--accent);
      margin: 2px 0;
    }

    .file:hover {
      background: rgba(0, 0, 0, 0.04);
      text-decoration: underline;
    }

    /* â”€â”€â”€â”€â”€ Search Result List â”€â”€â”€â”€â”€ */
    #searchResults {
      display: none;
      margin-top: 8px;
    }

    .search-item {
      padding: 5px;
      border-radius: 4px;
      cursor: pointer;
    }

    .search-item:hover {
      background: rgba(0, 0, 0, 0.05);
    }

    .search-name {
      font-size: 13px;
      color: var(--accent);
      font-weight: 500;
    }

    .search-path {
      font-size: 11px;
      color: var(--textSub);
    }

    /* â”€â”€â”€â”€â”€ Preview / Home Hero â”€â”€â”€â”€â”€ */
    .preview {
      flex: 1;
      position: relative;
      background: radial-gradient(circle at top left, #fff 0, #f5f5f7 40%, #e9ecf5 100%);
      overflow: hidden;
    }

    iframe {
      width: 100%;
      height: 100%;
      border: none;
      display: none;
      background: white;
    }

    .hero {
      position: absolute;
      inset: 0;
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      opacity: 0;
      transform: translateY(10px);
      transition: 0.35s;
      text-align: center;
      pointer-events: none;
    }

    .hero-visible {
      opacity: 1;
      transform: translateY(0);
    }

    .hero-title {
      font-size: 26px;
      font-weight: 600;
      letter-spacing: 0.12em;
    }

    .hero-sub {
      font-size: 15px;
      color: var(--textSub);
      margin-top: 10px;
    }

    @media (max-width: 900px) {
      .search-bar {
        max-width: 240px;
      }
      .hero-title {
        font-size: 20px;
      }
      .hero-sub {
        font-size: 13px;
        padding: 0 16px;
      }
    }
  </style>
</head>

<body>
<div class="app">

  <!-- Top Bar -->
  <header class="topbar">
    <div class="brand">
      <div class="brand-logo">
        <!-- é€™è£¡å¯ä»¥æ›æˆä½ çš„å¯¦éš› LOGO æª”æ¡ˆè·¯å¾‘ -->
        <img src="logo.png" alt="LOGO" />
      </div>
      <div class="brand-title">GOLDENWAY</div>
    </div>

    <div class="search-bar">
      <span class="search-icon">ğŸ”</span>
      <input class="search-input" id="searchInput" placeholder="æœå°‹æª”æ¡ˆ..." />
      <span id="searchClear" class="search-clear">Ã—</span>
    </div>
  </header>

  <div class="body">

    <!-- Sidebar -->
    <aside class="sidebar">
      <div>
        <button id="homeBtn" class="btn btn-primary">å›åˆ°é¦–é </button>
        <button id="expandBtn" class="btn">å±•é–‹å…¨éƒ¨</button>
        <button id="collapseBtn" class="btn">æ”¶åˆå…¨éƒ¨</button>
      </div>

      <div class="tree-container">
        <div id="tree"></div>
        <div id="searchResults"></div>
      </div>
    </aside>

    <!-- Preview / Home Hero -->
    <section class="preview">
      <div id="homeView" class="hero">
        <div class="hero-title">GOLDENWAY å®˜ç¶²å…§å®¹ç®¡ç†ç³»çµ±</div>
        <div class="hero-sub">è«‹å¾å·¦å´é¸æ“‡ä»»ä¸€ HTML æª”æ¡ˆé€²è¡Œé è¦½ï¼Œæˆ–ä½¿ç”¨ä¸Šæ–¹æœå°‹å¿«é€Ÿå®šä½ã€‚</div>
      </div>
      <iframe id="previewFrame"></iframe>
    </section>
  </div>
</div>

<script>
  let treeData = [];
  let fileIndex = [];

  // è®€å– tree-data.json
  fetch("tree-data.json")
    .then(res => res.json())
    .then(data => {
      treeData = data;
      buildFileIndex(data);
      document.getElementById("tree").appendChild(renderTree(data));
      showHome();
    })
    .catch(err => {
      document.getElementById("tree").innerHTML =
        "<span style='color:red;'>ç„¡æ³•è¼‰å…¥ tree-data.json</span><br>" + err;
    });

  // å»ºç«‹æœå°‹ç´¢å¼•
  function buildFileIndex(nodes, chain = []) {
    nodes.forEach(node => {
      if (node.children && node.children.length) {
        buildFileIndex(node.children, chain.concat(node.title));
      } else if (node.path) {
        fileIndex.push({
          title: node.title,
          path: node.path,
          full: [...chain, node.title].join(" / ")
        });
      }
    });
  }

  // å»ºç«‹æ¨¹ç‹€çµæ§‹
  function renderTree(nodes) {
    const ul = document.createElement("ul");

    nodes.forEach(node => {
      const li = document.createElement("li");

      if (node.children && node.children.length) {
        li.classList.add("folder");

        const title = document.createElement("div");
        title.className = "folder-title";

        const arrow = document.createElement("span");
        arrow.className = "arrow";
        arrow.textContent = "â–¸";

        const text = document.createElement("span");
        text.textContent = node.title;

        title.appendChild(arrow);
        title.appendChild(text);
        li.appendChild(title);

        const childUl = renderTree(node.children);
        li.appendChild(childUl);

        title.onclick = () => {
          li.classList.toggle("open");
        };
      } else if (node.path) {
        li.classList.add("file");
        li.textContent = node.title;
        li.onclick = () => loadPreview(node.path);
      }

      ul.appendChild(li);
    });

    return ul;
  }

  /* â”€â”€â”€â”€â”€ Home View â”€â”€â”€â”€â”€ */
  function showHome() {
    const frame = document.getElementById("previewFrame");
    const home = document.getElementById("homeView");
    frame.style.display = "none";
    home.style.display = "flex";
    requestAnimationFrame(() => home.classList.add("hero-visible"));
  }

  function hideHome() {
    const home = document.getElementById("homeView");
    home.classList.remove("hero-visible");
    setTimeout(() => {
      home.style.display = "none";
    }, 250);
  }

  /* â”€â”€â”€â”€â”€ Preview â”€â”€â”€â”€â”€ */
  function loadPreview(path) {
    hideHome();
    const frame = document.getElementById("previewFrame");
    frame.src = path;
    frame.style.display = "block";
  }

  /* â”€â”€â”€â”€â”€ Expand / Collapse â”€â”€â”€â”€â”€ */
  // å±•é–‹å…¨éƒ¨ï¼šåªå±•é–‹ç¬¬ä¸€å±¤è³‡æ–™å¤¾ï¼Œä¿ç•™éšå±¤æ„Ÿ
  document.getElementById("expandBtn").onclick = () => {
    const roots = document.querySelectorAll("#tree > ul > li.folder");
    roots.forEach(el => el.classList.add("open"));
  };

  // æ”¶åˆå…¨éƒ¨ï¼šé—œé–‰æ‰€æœ‰è³‡æ–™å¤¾
  document.getElementById("collapseBtn").onclick = () => {
    const all = document.querySelectorAll(".folder");
    all.forEach(el => el.classList.remove("open"));
  };

  /* â”€â”€â”€â”€â”€ Search â”€â”€â”€â”€â”€ */
  const searchInput = document.getElementById("searchInput");
  const searchClear = document.getElementById("searchClear");
  const searchResults = document.getElementById("searchResults");
  const treeEl = document.getElementById("tree");

  searchInput.oninput = () => {
    const q = searchInput.value.trim().toLowerCase();

    if (!q) {
      searchResults.style.display = "none";
      treeEl.style.display = "block";
      searchClear.classList.remove("visible");
      return;
    }

    searchClear.classList.add("visible");
    treeEl.style.display = "none";
    searchResults.style.display = "block";
    renderSearch(q);
  };

  searchClear.onclick = () => {
    searchInput.value = "";
    searchClear.classList.remove("visible");
    searchResults.style.display = "none";
    treeEl.style.display = "block";
    searchInput.focus();
  };

  function renderSearch(q) {
    searchResults.innerHTML = "";

    const list = fileIndex.filter(f =>
      f.title.toLowerCase().includes(q) || f.full.toLowerCase().includes(q)
    );

    if (!list.length) {
      searchResults.innerHTML = "<div style='color:#999;'>æ‰¾ä¸åˆ°ç¬¦åˆé …ç›®</div>";
      return;
    }

    list.forEach(f => {
      const row = document.createElement("div");
      row.className = "search-item";

      const name = document.createElement("div");
      name.className = "search-name";
      name.textContent = f.title;

      const path = document.createElement("div");
      path.className = "search-path";
      path.textContent = f.full;

      row.appendChild(name);
      row.appendChild(path);
      row.onclick = () => loadPreview(f.path);

      searchResults.appendChild(row);
    });
  }

  /* â”€â”€â”€â”€â”€ Home Button â”€â”€â”€â”€â”€ */
  document.getElementById("homeBtn").onclick = showHome;
</script>
</body>
</html>
